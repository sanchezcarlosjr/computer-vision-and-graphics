---
layout: default
title:  "Exercise 1 - Show an image by OpenCV"
---
<style>
* {
	border: none;
	padding: 0;
	margin: 0;
} 

container {
	display: flex;
	align-items: center;
	justify-content: center;
	flex-direction: column;
	width: 100%;
}

img {
	width: 50%;
}

canvas {
	width: 50%;
}
</style>

<p id="status">OpenCV.js is loading...</p>

<container>
  <input  accept="image/*" id="fileInput" name="file" />
  <container style="flex-direction: row;">
    <container>
      <h2>HTML Image</h2>
      <img id="img" alt="No Image" />
    </container>
    <container>
      <h2>OpenCV Image</h2>
      <canvas id="canvas">Your browser does not seem to support HTML canvas.</canvas>
    </container>
  </container>
</container>

<script async src="https://docs.opencv.org/4.7.0/opencv.js" type="text/javascript"></script>

<script>
	let imgElement = document.getElementById('img');
	let inputElement = document.getElementById('fileInput');
	inputElement.addEventListener('change', (e) => {
		imgElement.src = URL.createObjectURL(e.target.files[0]);
	}, false);
	imgElement.onload = function() {
		let mat = cv.imread(imgElement);
		cv.imshow('canvas', mat);
		mat.delete();
	};
	const Module = {
		// https://emscripten.org/docs/api_reference/module.html#Module.onRuntimeInitialized
		onRuntimeInitialized() {
			document.getElementById('status').innerHTML = 'OpenCV.js is ready.';
		}
	};
</script>
